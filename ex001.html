<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>ApresentaÃ§Ã£o de ExercÃ­cios - PyScript</title>

    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>

</head>

<body>
    <main>
        <section class="exercicio">
            <h1>ApresentaÃ§Ã£o de ExercÃ­cios - EX001</h1>

            <p>ConversÃ£o de Metros para centÃ­metros e milÃ­metros.</p>

            <textarea id="codigoPython">
                    nome = input('Qual Ã© o seu nome?')
                    altura = float(input('Qual Ã© a sua altura?'))
                    peso = float(input('Por fim, me informe o seu peso:'))

                    imc = peso / (altura**2) #calculo de IMC

                    #determinar a categoria do IMC

                    if imc > 40:
                        categoria = 'obesidade grau III'
                        mensagem =  'Aqui o sinal Ã© vermelho, com forte probabilidade de jÃ¡ existirem doenÃ§as muito graves associadas. O tratamento deve ser ainda mais urgente.'

                    elif 35.0 <= imc <=39.9:
                        categoria = 'obesidade grau II'
                        mensagem =  'Mesmo que seus exames aparentem estar normais, Ã© hora de se cuidar, iniciando mudanÃ§as no estilo de vida com o acompanhamento prÃ³ximo de profissionais de saÃºde.'


                    elif 30.0 <= imc <=34.9:
                        categoria = 'obesidade grau I'
                        mensagem = 'Sinal de alerta! Chegou na hora de se cuidar, mesmo que seus exames sejam normais. Vamos dar inÃ­cio a mudanÃ§as hoje! Cuide de sua alimentaÃ§Ã£o. VocÃª precisa iniciar um acompanhamento com nutricionista e/ou endocrinologista.'


                    elif 25.0 <= imc <=29.9:
                        categoria = 'sobrepeso'
                        mensagem = 'Ele Ã©, na verdade, uma prÃ©-obesidade e muitas pessoas nessa faixa jÃ¡ apresentam doenÃ§a associadas, como diabetes e hipertensÃ£o. Importante rever hÃ¡bitos e buscar ajuda antes de, por uma sÃ©rie de fatores, entrar na faixa da obesidade pra valer.'

                    elif 18.6 <= imc <=24.9:
                        categoria = 'normal'
                        mensagem = 'Que bom que vocÃª estÃ¡ com o peso normal! E o melhor jeito de continuar assim Ã© mantendo um estilo de vida ativo e uma alimentaÃ§Ã£o equilibrada.'

                    else: # se nÃ£o for nenhum outro sÃ³ pode ser esse (IMC <=18.5)
                        categoria = 'abaixo do normal'
                        mensagem =  'Procure um mÃ©dico. Algumas pessoas tÃªm um baixo peso por caracterÃ­sticas do seu organismo e tudo bem. Outras podem estar enfrentando problemas, como a desnutriÃ§Ã£o. Ã preciso saber qual Ã© o caso.' 


                    print(f'\nOlÃ¡ {nome}. Seu IMC Ã©: {imc:.1f}')
                    print(f'Categoria: {categoria}')
                    print(mensagem)

             </textarea>
            <br>
            <button id="executar">Executar</button>

            <h3>SaÃ­da:</h3>
            <div id="output"></div>

            <script>
                async function executarCodigo() {
                    let codigo = document.getElementById("codigoPython").value;
                    let outputDiv = document.getElementById("output");

                    // Inicializa o Pyodide se ainda nÃ£o estiver carregado
                    if (!window.pyodide) {
                        outputDiv.innerText = "Carregando o interpretador Python...";
                        window.pyodide = await loadPyodide();
                        outputDiv.innerText = "";
                    }

                    try {
                        // Redireciona a saÃ­da para capturar os prints
                        window.pyodide.runPython(`
    import sys
    import io
    sys.stdout = io.StringIO()
    sys.stderr = io.StringIO()
    
    # FunÃ§Ã£o para substituir input() pelo prompt() do JavaScript
    def input(prompt_text=""):
        import js
        return js.prompt(prompt_text)
                    `);

                        // Executa o cÃ³digo Python
                        window.pyodide.runPython(codigo);

                        // ObtÃ©m a saÃ­da do print()
                        let resultado = window.pyodide.runPython("sys.stdout.getvalue()");
                        outputDiv.innerText = resultado;
                    } catch (error) {
                        outputDiv.innerText = "Erro: " + error;
                    }
                }

                // Adiciona evento ao botÃ£o
                document.getElementById("executar").addEventListener("click", executarCodigo);
            </script>
        </section>


    </main>
</body>


</html>